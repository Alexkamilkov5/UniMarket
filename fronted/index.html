<!doctype html>
<html lang="ru">

<head>
  <meta charset="utf-8" />
  <title>UniMarket ‚Äî Cosmic Nexus</title>
  <link rel="stylesheet" href="/static/styles.css" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>

  <!-- Background Effects -->
  <div id="star-bg"></div>

  <div id="app-container">
    <!-- Sidebar -->
    <aside>
      <div class="avatar-section">
        <div class="avatar-frame">
          <span id="avatar-icon">üëΩ</span>
        </div>
        <h3 id="user-display">Guest</h3>
        <div id="status" class="user-status">Disconnected</div>
        <button id="btn-logout" class="secondary-btn"
          style="margin-top:10px; display:none; font-size:0.8em; width:100%">Logout</button>
      </div>

      <nav>
        <button class="nav-btn active" data-tab="tab-auth">üîê Portal (Auth)</button>
        <button class="nav-btn" data-tab="tab-market">üåå Nexus (Market)</button>
        <button class="nav-btn" data-tab="tab-manage">‚öôÔ∏è Core (Admin)</button>
      </nav>
    </aside>

    <!-- Main Content -->
    <main>

      <!-- Tab: Auth -->
      <section id="tab-auth" class="tab-content active">
        <h2>Identity Portal</h2>

        <div class="glass-panel">
          <h3>Login</h3>
          <div class="row">
            <input id="login-username" placeholder="Username" />
            <input id="login-password" type="password" placeholder="Password" />
          </div>
          <button id="btn-login" class="action-btn">Initialize Session</button>
          <div style="margin-top:10px">Token: <code id="token-preview">None</code></div>
        </div>

        <div class="glass-panel">
          <h3>New Identity</h3>
          <div class="row">
            <input id="reg-username" placeholder="New Username" />
            <input id="reg-password" type="password" placeholder="New Password" />
          </div>
          <button id="btn-register" class="action-btn">Register Identity</button>
          <pre id="reg-result" style="margin-top:10px"></pre>
        </div>

        <div class="glass-panel">
          <h3>System Status</h3>
          <div>API Backend: <span id="health" style="color:var(--neon-cyan)">Scanning...</span></div>
        </div>
      </section>

      <!-- Tab: Market -->
      <section id="tab-market" class="tab-content">
        <h2>Galactic Market</h2>

        <div class="glass-panel row" style="align-items: center;">
          <div style="flex:1">
            <label>Filter:</label>
            <select id="filter-category"></select>
          </div>
          <div style="flex:1">
            <label>Sort:</label>
            <select id="sort-by">
              <option value="id">ID</option>
              <option value="name">Name</option>
              <option value="price">Price</option>
            </select>
          </div>
          <button id="btn-load-items" class="action-btn">Refresh Feed</button>
        </div>

        <div id="items" class="items-grid">
          <!-- Items injected here -->
        </div>

        <div class="pagination">
          <button id="btn-prev" class="secondary-btn">‚Üê Prev Sector</button>
          <span style="align-self:center; color: var(--text-dim)">
            Offset: <input id="offset" type="number" value="0" style="width:60px; display:inline-block; margin:0">
            Limit: <input id="limit" type="number" value="10" style="width:60px; display:inline-block; margin:0">
          </span>
          <button id="btn-next" class="secondary-btn">Next Sector ‚Üí</button>
        </div>
      </section>

      <!-- Tab: Manage -->
      <section id="tab-manage" class="tab-content">
        <h2>Core Management</h2>

        <div class="glass-panel">
          <h3>Add Category</h3>
          <div class="row">
            <input id="cat-name" placeholder="Category Name" />
            <button id="btn-add-category" class="action-btn">Inject Category</button>
          </div>
          <button id="btn-load-categories" class="secondary-btn" style="margin-top:10px">Reload Database</button>
        </div>

        <div class="glass-panel">
          <h3>Fabricate Item</h3>
          <input id="item-name" placeholder="Item Name" />
          <div class="row">
            <input id="item-price" type="number" step="0.01" placeholder="Price (Credits)" />
            <select id="item-category" style="width: auto; flex-grow:1"></select>
          </div>
          <input id="item-desc" placeholder="Description/Specs" />
          <div style="margin: 10px 0;">
            <label style="color: var(--text-dim); font-size: 0.9em; display: block; margin-bottom: 5px;">Product Image
              (Optional)</label>
            <input id="item-image" type="file" accept="image/*" style="padding: 5px;" />
          </div>
          <button id="btn-add-item" class="action-btn">Fabricate</button>
        </div>
      </section>

    </main>

    <!-- Edit Modal -->
    <div id="edit-modal" class="modal"
      style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); z-index:1000; justify-content:center; align-items:center;">
      <div class="glass-panel" style="width:300px; padding:20px;">
        <h3>Edit Item</h3>
        <input type="hidden" id="edit-id">
        <label>Name</label>
        <input id="edit-name" style="width:100%; margin-top:5px;">
        <label>Price</label>
        <input id="edit-price" type="number" step="0.01" style="width:100%; margin-top:5px;">
        <label>Description</label>
        <input id="edit-desc" style="width:100%; margin-top:5px;">

        <div style="margin-top:15px; display:flex; gap:10px;">
          <button id="btn-save-edit" class="action-btn" style="flex:1">Save</button>
          <button onclick="document.getElementById('edit-modal').style.display='none'" class="secondary-btn"
            style="flex:1">Cancel</button>
        </div>
      </div>
    </div>

  </div>

  <script src="/static/script.js"></script>
</body>

</html>